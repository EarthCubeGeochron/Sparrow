---
Adding custom commands
---

import { GuidePage } from "components";

{% hint style="warning" %}
The best-practice way to add commands is currently in development, and some changes are expected during the `2.x` release series.
{% endhint %}

Sparrow commands can be created within plugins with using the `on_setup_cli` hook, as such:

```text
from click import command
from sparrow.plugins import SparrowPlugin

@command(name="import-data")
def import_data():
    print("No data yet!")

class DataReductionImportPlugin(SparrowPlugin):
    name = "data-reduction-import"

    def on_setup_cli(self, cli):
        cli.add_command(import_data)
```

How this works internally is complicated: The `sparrow` command-line application actually wraps a similar command-line application within the `backend` Docker container, which calls commands in the application's context.

- Most commands that don't directly manage the Docker services are passed through to the inner layer, which should be happen transparently for most commands.
- In order to notify the Sparrow wrapper that a new command is available, we need to refresh some cached help text, which can be done using the command `sparrow dev clear-cache` \(note: this happens automatically on each `sparrow up` as well\).

export default GuidePage;
